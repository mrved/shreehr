# Plan 07-01: Test Data Seeding

## Objective
Seed comprehensive test data covering all user roles, multi-state employees (for PT testing), ESI salary ranges, and historical payroll runs.

## Context
@file:prisma/schema.prisma
@file:src/lib/seed-admin.ts
@file:docs/research/SECURITY-TESTDATA-RESEARCH.md

## Tasks

### Task 1: Create Employee Seed Script
**Type:** auto

**Files:**
- `prisma/seed-employees.ts` (create)

**Action:**
Create seed script with 5 employees covering all roles:

| Role | Name | State | Salary | Purpose |
|------|------|-------|--------|---------|
| SUPER_ADMIN | Already exists | - | - | Admin access |
| ADMIN | Priya Sharma | Karnataka | ₹85,000 | HR admin |
| HR_MANAGER | Rajesh Kumar | Maharashtra | ₹65,000 | Leave approvals |
| PAYROLL_MANAGER | Anita Patel | Gujarat | ₹55,000 | Payroll processing |
| EMPLOYEE | Vikram Singh | Tamil Nadu | ₹18,000 | ESI eligible (≤₹21K) |
| EMPLOYEE | Meera Reddy | Karnataka | ₹42,000 | Standard employee |

Include:
- Realistic Indian names, departments (Engineering, HR, Finance, Operations)
- Different designations (Manager, Senior Engineer, Executive, Associate)
- Proper date_of_joining (staggered over past year)
- Bank details (masked), PAN format (ABCDE1234F)

**Verify:**
```bash
npx tsx prisma/seed-employees.ts
```

**Done:** 5 employees created with varied roles, states, salaries

### Task 2: Seed Leave Balances & History
**Type:** auto

**Files:**
- `prisma/seed-employees.ts` (extend)

**Action:**
For each employee, create:
- Leave balances (CL: 8-12, SL: 6-10, EL: 10-15 based on tenure)
- 3-5 historical leave requests (mix of approved, pending)
- Attendance records for past 30 days (with some absences)

**Verify:**
Query leave_balances table shows data for all employees

**Done:** Leave balances and history seeded

### Task 3: Seed Historical Payroll
**Type:** auto

**Files:**
- `prisma/seed-payroll.ts` (create)

**Action:**
Create payroll runs for past 3 months (Nov, Dec, Jan):
- PayrollRun records with COMPLETED status
- PayrollRecord for each employee with:
  - Correct statutory calculations (PF, ESI where applicable, PT by state)
  - LOP deductions for some employees
- One employee with active loan (EMI deduction visible)

**Verify:**
```bash
npx tsx prisma/seed-payroll.ts
```

**Done:** 3 months of payroll history with statutory deductions

## Success Criteria
1. 5+ employees with different roles seeded
2. Multi-state coverage (Karnataka, Maharashtra, Gujarat, Tamil Nadu)
3. At least one ESI-eligible employee (salary ≤₹21K)
4. 3 months historical payroll with correct calculations
5. Leave balances and attendance history populated
