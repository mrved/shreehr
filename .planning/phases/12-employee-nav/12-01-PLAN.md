# Phase 12-01: Fix Employee Navigation

## Objective
Make all employee features accessible via navigation on both desktop and mobile.

## Scope
- Add 3 missing features to navigation (Expenses, Investments, Loans)
- Implement "More" menu for mobile
- Add active state to navigation items
- Add `/employee` redirect
- Update dashboard quick actions

## Prerequisites
- None (standalone enhancement)

## Files to Modify

### 1. `src/app/employee/layout.tsx`
**Changes:**
- Add imports for: `Receipt`, `TrendingUp`, `Wallet`, `MoreHorizontal`, `Clock` from lucide-react
- Update EmployeeNav() to include all 9 items with active states
- Update MobileNavItem to show active state
- Replace mobile nav with 5 items: Home, Attendance, Leave, Payslips, More
- Add MobileMoreMenu component using Sheet

**Desktop Sidebar Items (9):**
```typescript
const employeeNavItems = [
  { href: "/employee/dashboard", icon: Home, label: "Dashboard" },
  { href: "/employee/attendance", icon: Clock, label: "Attendance" },
  { href: "/employee/leave", icon: Calendar, label: "Leave" },
  { href: "/employee/payslips", icon: FileText, label: "Payslips" },
  { href: "/employee/tax", icon: FileCheck, label: "Tax Docs" },
  { href: "/employee/expenses", icon: Receipt, label: "Expenses" },
  { href: "/employee/investments", icon: TrendingUp, label: "Investments" },
  { href: "/employee/loans", icon: Wallet, label: "Loans" },
  { href: "/employee/profile", icon: User, label: "Profile" },
];
```

**Mobile Bottom Nav (5 slots):**
- Home → /employee/dashboard
- Attendance → /employee/attendance  
- Leave → /employee/leave
- Payslips → /employee/payslips
- More → Opens sheet with: Tax, Expenses, Investments, Loans, Profile

### 2. `src/app/employee/page.tsx` (CREATE)
**Purpose:** Redirect `/employee` to `/employee/dashboard`
```typescript
import { redirect } from "next/navigation";

export default function EmployeePage() {
  redirect("/employee/dashboard");
}
```

### 3. `src/app/employee/dashboard/page.tsx`
**Changes:**
- Add Quick Actions for Expenses, Investments, Loans
- Reorder quick actions logically

**Updated Quick Actions (6):**
1. Apply Leave - /employee/leave/apply
2. View Payslips - /employee/payslips
3. Tax Documents - /employee/tax
4. Submit Expense - /employee/expenses/new
5. Investments - /employee/investments
6. My Loans - /employee/loans

## Implementation Details

### Active State Logic
```typescript
"use client";
import { usePathname } from "next/navigation";

// In NavItem:
const pathname = usePathname();
const isActive = pathname === href || pathname.startsWith(`${href}/`);
```

### Mobile More Menu (Sheet Component)
```typescript
import {
  Sheet,
  SheetContent,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from "@/components/ui/sheet";

function MobileMoreMenu() {
  const [open, setOpen] = useState(false);
  
  const moreItems = [
    { href: "/employee/tax", icon: FileCheck, label: "Tax Documents" },
    { href: "/employee/expenses", icon: Receipt, label: "Expenses" },
    { href: "/employee/investments", icon: TrendingUp, label: "Investments" },
    { href: "/employee/loans", icon: Wallet, label: "Loans" },
    { href: "/employee/profile", icon: User, label: "Profile" },
  ];

  return (
    <Sheet open={open} onOpenChange={setOpen}>
      <SheetTrigger asChild>
        <button className="...">
          <MoreHorizontal className="h-5 w-5" />
          <span>More</span>
        </button>
      </SheetTrigger>
      <SheetContent side="bottom" className="h-auto">
        <SheetHeader>
          <SheetTitle>More Options</SheetTitle>
        </SheetHeader>
        <nav className="grid grid-cols-3 gap-4 py-4">
          {moreItems.map((item) => (
            <Link 
              key={item.href} 
              href={item.href}
              onClick={() => setOpen(false)}
              className="flex flex-col items-center gap-2 p-3 rounded-lg hover:bg-gray-100"
            >
              <item.icon className="h-6 w-6" />
              <span className="text-xs">{item.label}</span>
            </Link>
          ))}
        </nav>
      </SheetContent>
    </Sheet>
  );
}
```

## Acceptance Criteria

- [ ] All 9 employee features accessible via desktop sidebar
- [ ] Mobile users can access all features via bottom nav + More menu
- [ ] Current page highlighted in navigation
- [ ] `/employee` redirects to `/employee/dashboard`
- [ ] Dashboard has quick actions for all key features
- [ ] No visual regressions on existing pages

## Testing Checklist

1. Desktop:
   - [ ] All 9 sidebar items visible and clickable
   - [ ] Active item highlighted
   - [ ] Each link navigates correctly

2. Mobile:
   - [ ] Bottom nav shows 5 items (Home, Attendance, Leave, Payslips, More)
   - [ ] Tapping "More" opens sheet
   - [ ] Sheet shows remaining 5 items
   - [ ] Tapping item in sheet navigates and closes sheet
   - [ ] Active states work

3. Routing:
   - [ ] `/employee` redirects to `/employee/dashboard`
   - [ ] All routes load correctly

4. Dashboard:
   - [ ] 6 quick action cards visible
   - [ ] All quick actions navigate correctly

## Estimated Effort
- Layout updates: 30 min
- Page.tsx creation: 5 min
- Dashboard updates: 15 min
- Testing: 15 min
- **Total: ~1 hour**

## Risks
- Sheet component must be available (shadcn/ui)
- Need to verify all routes have valid pages (confirmed in research)

## Notes
- Chat remains as floating button (preferred UX for AI assistant)
- Consider adding notification badges to nav items later (e.g., pending leave count)
